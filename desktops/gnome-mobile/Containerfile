ARG from
FROM $from

ARG target_tag

COPY etc/ /etc/

RUN dnf -y install \
    @gnome-desktop \
    gnome-shell \
    gnome-shell-extension-nekotorch \
    gnome-software-rpm-ostree \
    default-flatpaks \
    --exclude gnome-boxes \
    --exclude gnome-connections \
    --exclude gnome-text-editor \
    --exclude gnome-calculator \
    --exclude gnome-calendar \
    --exclude gnome-characters \
    --exclude gnome-classic-session \
    --exclude gnome-clocks \
    --exclude gnome-contacts \
    --exclude gnome-font-viewer \
    --exclude gnome-logs \
    --exclude gnome-maps \
    --exclude gnome-system-monitor \
    --exclude gnome-user-docs \
    --exclude gnome-weather \
    --exclude gnome-tour \
    --exclude malcontent-control \
    --exclude simple-scan \
    --exclude evince-djvu \
    --exclude snapshot \
    --exclude decibels \
    --exclude showtime \
    --exclude baobab \
    --exclude evince \
    --exclude papers \
    --exclude totem \
    --exclude loupe \
    --exclude yelp \
    --exclude PackageKit \
    --exclude PackageKit-command-not-found

RUN systemctl enable gdm.service

# cleanup
RUN dnf clean all && rm -rf /var/log/*

RUN bootc container lint --no-truncate
